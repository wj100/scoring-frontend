# 🏸 双打数据统计逻辑说明

## 📊 数据存储格式

### 双打记录存储
```javascript
// ScoreRecord2 数据表
{
  date: '2025-01-27',
  match: '杭宁&汪骏-建华&言志',  // 团队格式
  score: '21-18',
  teamA: ['杭宁', '汪骏'],      // A队队员数组
  teamB: ['建华', '言志']       // B队队员数组
}
```

## 🔢 个人统计计算逻辑

### 双打得分分配
当一场双打比赛 `杭宁&汪骏 vs 建华&言志` 比分为 `21-18` 时：

1. **A队队员（杭宁、汪骏）**：
   - 每人获得 21 分
   - 每人计 1 场比赛
   - 每人计 1 场胜利

2. **B队队员（建华、言志）**：
   - 每人获得 18 分
   - 每人计 1 场比赛
   - 每人计 0 场胜利

### 统计计算示例

假设有以下双打记录：
- `杭宁&汪骏 vs 建华&言志` 21-18
- `杭宁&建华 vs 汪骏&言志` 19-21
- `汪骏&言志 vs 杭宁&建华` 21-17

**杭宁的个人统计**：
- 总分：21 + 19 = 40
- 胜场：1 + 0 = 1
- 总场：1 + 1 = 2
- 胜率：1/2 = 50%

**汪骏的个人统计**：
- 总分：21 + 21 = 42
- 胜场：1 + 1 = 2
- 总场：1 + 1 = 2
- 胜率：2/2 = 100%

## 🎯 实现细节

### 数据解析
```javascript
// 从存储格式解析
const [teamA, teamB] = match.split('-')  // ['杭宁&汪骏', '建华&言志']
const playersA = teamA.split('&')        // ['杭宁', '汪骏']
const playersB = teamB.split('&')        // ['建华', '言志']
```

### 统计分配
```javascript
// A队队员统计
playersA.forEach(player => {
  stats[player].totalScore += scoreA
  stats[player].totalGames++
  if (scoreA > scoreB) stats[player].wins++
})

// B队队员统计
playersB.forEach(player => {
  stats[player].totalScore += scoreB
  stats[player].totalGames++
  if (scoreB > scoreA) stats[player].wins++
})
```

## 📈 显示效果

### 个人统计表格
| 队员 | 总分 | 胜场 | 总场 | 胜率 | 均分 |
|------|------|------|------|------|------|
| 汪骏 | 42   | 2    | 2    | 100% | 21.0 |
| 杭宁 | 40   | 1    | 2    | 50%  | 20.0 |
| 建华 | 35   | 0    | 2    | 0%   | 17.5 |
| 言志 | 38   | 1    | 2    | 50%  | 19.0 |

### 对战记录表格
| 日期       | 对战           | 比分  |
|------------|----------------|-------|
| 2025-01-27 | 杭宁&汪骏 vs 建华&言志 | 21-18 |
| 2025-01-27 | 杭宁&建华 vs 汪骏&言志 | 19-21 |
| 2025-01-27 | 汪骏&言志 vs 杭宁&建华 | 21-17 |

## ✅ 关键特点

1. **个人化统计**：每个队员都有独立的统计数据
2. **公平分配**：双打得分平均分配给每个参与的队员
3. **完整记录**：保留完整的团队对战信息
4. **灵活查询**：支持按时间范围查询个人表现

这样确保了双打数据虽然以团队形式存储，但统计时能够正确分配给每个参与的队员！🎾
